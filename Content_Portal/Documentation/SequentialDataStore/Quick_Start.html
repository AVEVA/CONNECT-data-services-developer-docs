<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Quick Start: Sequential Data Store </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Quick Start: Sequential Data Store ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../index.html" width="46">
        <img id="logo" src="../../../Content_Portal/Documentation/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Cloud Services">
        </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="sdsQuickStart">
<h1 id="quick-start-sequential-data-store">Quick Start: Sequential Data Store</h1>

<p>Sequential Data Store (SDS) is a sophisticated data store. The steps described here show a very simple interaction with SDS.
To follow along with the steps in this section, you will first need an account, tenant and associated security credentials. 
If you have not already acquired an account, email <a href="mailto://cloudservices@osisoft.com">OCS support</a> at OSIsoft Cloud Services.</p>
<p>You will be mainly working on the <a href="https://cloud.osisoft.com/">OSIsoft Cloud Services portal</a>. Sign into the portal using the credentials associated with the tenant. You will also need a namespace and administrative client keys. </p>
<h4 id="step-1-acquire-a-namespace">Step 1: Acquire a Namespace</h4>
<p>In the portal, open the navigation menu <img src="../images/icon_navigation_bigger.png" alt="navigation menu"> and select <strong>Data Management</strong> &gt; <strong>Namespaces</strong>.
You can use an existing namespace or create a new one.</p>
<h4 id="step-2-acquire-a-client-identity-and-secret">Step 2: Acquire a Client Identity and Secret</h4>
<p>The application acts as a confidential client – an application that is capable of securely maintaining a secret.
In Azure Active Directory, the confidential client authentication flow is accomplished using an Application Identity.
OSIsoft Cloud Services supports this authentication with a Client Identity (Client Id) and a Client Secret.</p>
<p>To acquire a client identity from the portal, open the navigation menu and select <strong>Security</strong> &gt; <strong>Clients</strong>.</p>
<p>You can either select an existing client or create a new client. For a new client, select <strong>Add Client</strong> and follow the 
prompts for creating a client identity and client secret. Be sure to keep a record of the client secret.
For an exisiting client, highlight the desired client and select <strong>Client Details</strong> to see configuration information. </p>
<p>You will need the Tenant Identity, Client Identity, and Client Secret to proceed. </p>
<p>The Tenant Identity, Client Identity, and Client Secret are used to acquire a security token from an identity 
provider, Azure Active Directory in this case.</p>
<h4 id="step-3-acquire-authentication-token">Step 3: Acquire authentication token</h4>
<p>You use the Tenant Identity, Client Identity, and Client Secret to acquire an access token 
from Azure Active Directory. Select one of the clients from the list to see configuration information 
and code samples in various languages which are shown on tabs in the right panel.</p>
<h4 id="step-4-create-data-types">Step 4: Create data types</h4>
<p>An SdsType (or type) describes the structure of a single measured event or object. An SdsStream (or stream) has an associated 
SdsType and stores a stream of events or objects that take the shape of that type.</p>
<p>A type consists of one or more data properties, one of which must represent an index. Indexes can be 
simple (a single integer property, for example) or compound (represented by multiple properties). 
<code>DateTime</code> is a common index for time-series stores. </p>
<p>SDS supports a wide variety of property types, both simple (integers, strings and floats, for example) 
and complex (lists, arrays and enumerations, for example). Properties can be of any complex SdsType. 
See <a class="xref" href="SDS_Types.html#sdstypecode">Types</a> for a detailed list of supported data types.</p>
<p>The SdsType is defined in JSON and is posted on OSIsoft Cloud Services (OCS) endpoint.</p>
<pre><code class="lang-json">POST /api/v1/Tenants/{tenantId}/Namespaces/{namespaceId}/Types/{typeId}  
HTTP/1.1
Authorization: Bearer &lt;bearer-token&gt;
Content-Length: 1562
Content-Type: application/json
Host: dat-b.osisoft.com
{
    &quot;Id&quot;: &quot;Simple&quot;,
    &quot;Name&quot;: &quot;Simple&quot;,
    &quot;Description&quot;: null,
    &quot;SdsTypeCode&quot;: 1,
    &quot;IsGenericType&quot;: false,
    &quot;IsReferenceType&quot;: false,
    &quot;GenericArguments&quot;: null,
    &quot;Properties&quot;: [
        {
            &quot;Id&quot;: &quot;Time&quot;,
            &quot;Name&quot;: &quot;Time&quot;,
            &quot;Description&quot;: null,
            &quot;Order&quot;: 0,
            &quot;IsKey&quot;: true,
            &quot;FixedSize&quot;: 0,
            &quot;SdsType&quot;: {
                &quot;Id&quot;: &quot;19a87a76-614a-385b-ba48-6f8b30ff6ab2&quot;,
                &quot;Name&quot;: &quot;DateTime&quot;,
                &quot;Description&quot;: null,
                &quot;SdsTypeCode&quot;: 16,
                &quot;IsGenericType&quot;: false,
                &quot;IsReferenceType&quot;: false,
                &quot;GenericArguments&quot;: null,
                &quot;Properties&quot;: null,
                &quot;BaseType&quot;: null,
                &quot;DerivedTypes&quot;: null,
                &quot;InterpolationMode&quot;: 0,
                &quot;ExtrapolationMode&quot;: 0
            },
            &quot;Value&quot;: null,
            &quot;Uom&quot;: null,
            &quot;InterpolationMode&quot;: null
        },
        {
            &quot;Id&quot;: &quot;State&quot;,
            &quot;Name&quot;: &quot;State&quot;,
            &quot;Description&quot;: null,
            &quot;Order&quot;: 0,
            &quot;IsKey&quot;: false,
            &quot;FixedSize&quot;: 0,
            &quot;SdsType&quot;: {
                &quot;Id&quot;: &quot;e20bdd7e-590b-3372-ab39-ff61950fb4f3&quot;,
                &quot;Name&quot;: &quot;State&quot;,
                &quot;Description&quot;: null,
                &quot;SdsTypeCode&quot;: 609,
                &quot;IsGenericType&quot;: false,
                &quot;IsReferenceType&quot;: false,
                &quot;GenericArguments&quot;: null,
                &quot;Properties&quot;: [
                    {
                        &quot;Id&quot;: &quot;Ok&quot;,
                        &quot;Name&quot;: null,
                        &quot;Description&quot;: null,
                        &quot;Order&quot;: 0,
                        &quot;IsKey&quot;: false,
                        &quot;FixedSize&quot;: 0,
                        &quot;SdsType&quot;: null,
                        &quot;Value&quot;: 0,
                        &quot;Uom&quot;: null,
                        &quot;InterpolationMode&quot;: null
                    },
                    {
                        &quot;Id&quot;: &quot;Warning&quot;,
                        &quot;Name&quot;: null,
                        &quot;Description&quot;: null,
                        &quot;Order&quot;: 0,
                        &quot;IsKey&quot;: false,
                        &quot;FixedSize&quot;: 0,
                        &quot;SdsType&quot;: null,
                        &quot;Value&quot;: 1,
                        &quot;Uom&quot;: null,
                        &quot;InterpolationMode&quot;: null
                    },
                    {
                        &quot;Id&quot;: &quot;Alarm&quot;,
                        &quot;Name&quot;: null,
                        &quot;Description&quot;: null,
                        &quot;Order&quot;: 0,
                        &quot;IsKey&quot;: false,
                        &quot;FixedSize&quot;: 0,
                        &quot;SdsType&quot;: null,
                        &quot;Value&quot;: 2,
                        &quot;Uom&quot;: null,
                        &quot;InterpolationMode&quot;: null
                    }
                ],
                &quot;BaseType&quot;: null,
                &quot;DerivedTypes&quot;: null,
                &quot;InterpolationMode&quot;: 0,
                &quot;ExtrapolationMode&quot;: 0
            },
            &quot;Value&quot;: null,
            &quot;Uom&quot;: null,
            &quot;InterpolationMode&quot;: null
        },
        {
            &quot;Id&quot;: &quot;Measurement&quot;,
            &quot;Name&quot;: &quot;Measurement&quot;,
            &quot;Description&quot;: null,
            &quot;Order&quot;: 0,
            &quot;IsKey&quot;: false,
            &quot;FixedSize&quot;: 0,
            &quot;SdsType&quot;: {
                &quot;Id&quot;: &quot;6fecef77-20b1-37ae-aa3b-e6bb838d5a86&quot;,
                &quot;Name&quot;: &quot;Double&quot;,
                &quot;Description&quot;: null,
                &quot;SdsTypeCode&quot;: 14,
                &quot;IsGenericType&quot;: false,
                &quot;IsReferenceType&quot;: false,
                &quot;GenericArguments&quot;: null,
                &quot;Properties&quot;: null,
                &quot;BaseType&quot;: null,
                &quot;DerivedTypes&quot;: null,
                &quot;InterpolationMode&quot;: 0,
                &quot;ExtrapolationMode&quot;: 0
            },
            &quot;Value&quot;: null,
            &quot;Uom&quot;: null,
            &quot;InterpolationMode&quot;: null
        }
    ],
    &quot;BaseType&quot;: null,
    &quot;DerivedTypes&quot;: null,
    &quot;InterpolationMode&quot;: 0,
    &quot;ExtrapolationMode&quot;: 0
}
</code></pre><p>To help users develop .NET client applications for SDS, OSIsoft provides OCS client libraries through NuGet packages, 
<a href="https://www.nuget.org/packages/OSIsoft.OCSClients/">OCSClients</a>. OCSClients consists of necessary libraries
to connect to OCS and manage data. Note that SDS client libraries are only available in .NET.</p>
<p>You can use <code>SdsTypeBuilder</code> in .NET client libraries to create types:</p>
<pre><code class="lang-csharp">public enum State
{
    Ok,
    Warning,
    Alarm
}

public class Simple
{
    [SdsMember(IsKey = true, Order = 0)]
    public DateTime Time { get; set; }
    public State State { get; set; }
    public Double Measurement { get; set; }
}

SdsType simpleType = SdsTypeBuilder.CreateSdsType&lt;Simple&gt;();
simpleType.Id = &quot;Simple&quot;;
simpleType.Name = &quot;Simple&quot;;
simpleType.Description = &quot;Basic sample type&quot;;
await config.CreateTypeAsync(simpleType);
</code></pre><h4 id="step-5-create-a-stream">Step 5: Create a stream</h4>
<p>An SdsStream (or stream) has an associated SdsType and stores a stream of events or objects that take the shape of that type. 
For more information, see <a class="xref" href="SDS_Streams.html">Streams</a>.</p>
<p>Define and post a JSON representation of SdsStream to OCS endpoint.</p>
<pre><code class="lang-json">POST /api/v1/Tenants/{tenantId}/Namespaces/{namespaceId}/Streams/{streamId}  
HTTP/1.1
Authorization: Bearer &lt;bearer-token&gt;
Content-Length: 139
Content-Type: application/json
Host: dat-b.osisoft.com
{  
    &quot;Id&quot;: &quot;Simple&quot;,
    &quot;Name&quot;: &quot;Simple&quot;,
    &quot;Description&quot;: null,
    &quot;TypeId&quot;: &quot;Simple&quot;,
    &quot;Indexes&quot;: null,
    &quot;InterpolationMode&quot;: null,
    &quot;ExtrapolationMode&quot;: null,
    &quot;PropertyOverrides&quot;: null 
}
</code></pre><p>You can create a stream for simple events also by using .NET client libraries method:</p>
<pre><code class="lang-csharp">SdsStream simpleStream = new SdsStream() 
{
    Id = &quot;Simple&quot;,
    Name = &quot;Simple&quot;,
    TypeId = simpleType.Id
};

simpleStream = config.CreateStreamAsync(simpleStream);
</code></pre><h4 id="step-6-write-data">Step 6: Write data</h4>
<p>SDS supports a number of methods for adding and updating data. In this section, you will insert data. 
Inserts fail if events with the same index already exist in the database.
Update adds new events and replaces existing events.
For more information, see <a class="xref" href="Writing_Data.html">Write data</a>.</p>
<p>Add data to SDS by posting a JSON serialized event to OCS endpoint:</p>
<pre><code class="lang-json">POST /api/v1/Tenants/{tenantId}/Namespaces/{namespaceId}/Streams/{streamId}/Data
HTTP/1.1
Authorization: Bearer &lt;bearer-token&gt;
Content-Length: 57
Content-Type: application/json
Host: dat-b.osisoft.com
[
    {  
       &quot;Time&quot;:&quot;2017-08-17T17:21:36.3494129Z&quot;,
       &quot;State&quot;:0,
       &quot;Measurement&quot;:123.45
    }
]
</code></pre><p>You can alternatively use .NET client libraries method <code>InsertValueAsync</code>:</p>
<pre><code class="lang-csharp">Simple value = new Simple()
{
    Time = DateTime.UtcNow,
    State = State.Ok,
    Measurement = 123.45
};

await client.InsertValueAsync(simpleStream.Id, value);
</code></pre><h4 id="step-7-read-data">Step 7: Read data</h4>
<p>SDS includes different read methods for retrieving data from streams. 
For more information, see <a class="xref" href="Reading_Data.html">Read data</a>.
The examples below are of reading value that was recently written.
You need an index or indexes in a read data call, a timestamp of that value in this case.</p>
<p>Read a value from SDS at a distinct index by making a REST API call to OCS:</p>
<pre><code class="lang-json">GET api/v1/Tenants/{tenantId}/Namespaces/{namespaceId}/Streams/{streamId}/Data?index=2017-08-17T17:21:36.3494129Z 
HTTP/1.1 200
Content-Type: application/json
[
    {
        &quot;Time&quot;: &quot;2017-08-17T17:21:36.3494129Z&quot;,
        &quot;State&quot;: 0,
        &quot;Measurement&quot;: 20
    }
]
</code></pre><p>One or more indexes are needed in most read calls to determine which data to read. 
The simplest way to supply an index is as a string. A <code>DateTime</code> is used as an index below in .NET:</p>
<pre><code class="lang-csharp">string index = DateTime.Parse(&quot;2017-08-17T17:21:36.3494129Z&quot;)
               .ToUniversalTime().ToString(&quot;o&quot;); 
</code></pre><p>To read a value at a distinct index, you can use the SDS .NET client libraries method.
<code>Time</code> is the index here, which is a property of a type named <code>Simple</code>: </p>
<pre><code class="lang-csharp">value = await client.GetDistinctValueAsync&lt;Simple&gt;(simpleStream.Id, index); 
</code></pre><h3 id="handling-transient-service-interruptions">Handling transient service interruptions</h3>
<p>All applications that communicate with remote systems must manage transient faults. 
Temporary service interruptions are a fact of life in real-world cloud applications. </p>
<p>If you access SDS with .NET client libraries methods, transient fault handling is built in; 
the SDS client automatically retries error codes identified as transient.</p>
<p>If you are directly calling into the OCS through SDS REST APIs (not using .NET), you should 
consider creating your own retry logic to handle errors identified as transient.
In this case, we recommend a logic which returns HTTP status code <code>503: Service Unavailable</code>:
an immediate first retry followed by an exponential backoff.</p>
<h3 id="sds-client-error">SDS client error</h3>
<p>If you access SDS using the .NET client libraries methods, note that any non-success
responses returned to the client are packaged in an <code>SdsHttpClientException</code>,
which is an exception with the following additional properties:</p>
<pre><code class="lang-csharp">string ReasonPhrase
HttpStatusCode StatusCode
Dictionary&lt;string, object&gt; Errors 
</code></pre><ul>
<li>The StatusCode provides the <code>HttpStatusCode</code> from the response.</li>
<li>The <code>ReasonPhrase</code> might provide additional information regarding the cause of the exception. 
You should always evaluate the <code>ReasonPhrase</code> in addition to the <code>StatusCode</code> to determine the cause of the exception.</li>
<li>The errors collection may provide additional specific error information based on the response. For example, 
if an <code>InsertValues</code> call failed because it conflicted with an existing event in the stream, the index of the 
conflicting event will be included in this dictionary.</li>
</ul>
<h3 id="sds-timeout-request-header">SDS Timeout Request Header</h3>
<p>Handling timeout issues can be difficult and confusing in a distributed programming environment. When a client 
times out, for example, the request is terminated before the client receives a response from the server. Meanwhile, the application is
unaware of the state of the server.</p>
<p>One solution is to use the <code>Request-Timeout</code> header, which is recognized by many services in OCS. Using the 
header, you can tell the server how long to spend on a particular request before timing out. If possible, the server 
terminates the request if the time it takes to process the request exceeds the timeout value set in the header.</p>
<p>To specify the request timeout value, include the Request-Timeout header and specify the value in seconds.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OCS-Docs/blob/master/Content_Portal/Documentation/SequentialDataStore/Quick_Start.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 1995 - 2020 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
