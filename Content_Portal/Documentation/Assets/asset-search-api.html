<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Assets search API </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Assets search API ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../index.html" width="46">
        <img id="logo" src="../../../Content_Portal/Documentation/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Cloud Services">
        </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="AssetsSearchAPI">
<h1 id="assets-search-api">Assets search API</h1>

<p>The assets search API allows you to search for your assets with search criteria.</p>
<hr>
<h2 id="get-assets-by-search-criteria"><code>Get Assets by Search Criteria</code></h2>
<p>Returns an array of assets that meet the search criteria.</p>
<h3 id="searchable-properties">Searchable Properties</h3>
<p>Assets can be searched on the following asset properties:</p>
<ul>
<li><p>Asset Top-level Fields</p>
<ul>
<li>Id, Name, Description, AssetTypeId, AssetTypeName</li>
</ul>
</li>
<li><p>Metadata Fields</p>
<ul>
<li>Name, Description. Value</li>
</ul>
</li>
<li><p>Stream Reference Fields</p>
<ul>
<li>StreamReferences - Stream Reference Name</li>
<li>StreamProperties - Sds Stream Property Ids, not including indices</li>
</ul>
</li>
</ul>
<p>Search criteria can be chained together using an <strong>AND</strong>. See examples below. </p>
<h2 id="search-assets"><code>Search Assets</code></h2>
<p>Searches and returns assets matching the search criteria.</p>
<h3 id="request">Request</h3>
<pre><code class="lang-text">GET api/v1-preview/Tenants/{tenantId}/Namespaces/{namespaceId}/Assets?skip={skip}&amp;count={count}&amp;orderby={orderby}&amp;query={queryString}&amp;filter={filterString}&amp;pageSize={pageSize}&amp;maxPages={maxPages}&amp;continuationToken={continuationToken}
</code></pre><h3 id="parameters">Parameters</h3>
<p><code>string tenantId</code><br>The tenant identifier</p>
<p><code>string namespaceId</code><br>The namespace identifier</p>
<p><code>string queryString</code><br>The asset query string. Search strings are not case-sensitive.</p>
<p><code>string filterString</code><br>String used to filter the asset search results. Filter strings are not case sensitive. The strings on which you can filter results are limited to the asset AssetTypeName property and the asset metadata properties (using the syntax filter[<em>property_name</em>]=<em>property_value</em>).</p>
<p>[optional] <code>int skip</code><br>An optional parameter representing the zero-based offset of the first asset to retrieve. If not specified, a default value of 0 is used.</p>
<p>[optional] <code>int count</code><br>An optional parameter, between 1 and 1000 (inclusive), that represents the maximum number of assets to retrieve. If not specified, the default is 100.</p>
<p>[optional] <code>[id|name] [asc|desc|] orderby</code><br>An optional parameter which returns assets ordered either by the asset <code>Id</code> or the asset <code>name</code>. Specify asc or desc to return the results in ascending or descending order. If not specified, the default is ascending order.</p>
<p>[optional] <code>int pageSize</code><br>Must be used with <code>maxPages</code> to configure the pages of the search results. This parameter defines the maximum number of assets that are returned on each page. </p>
<p>[optional] <code>int maxPages</code><br>Must be used with <code>pageSize</code> to configure the pages of the search results. This parameter defines the maximum number of pages. Search results that exceed maxPages are not returned. </p>
<p>[optional] <code>string continuationToken</code><br>Retrieves a specific page of the search results. </p>
<h3 id="response">Response</h3>
<p>Returns an array of assets matching the search query and the total number of assets returned specified as Total-Count in the HTTP response header. </p>
<table>
<thead>
<tr>
<th>Status Code</th>
<th>Body Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>Asset list</td>
<td>A list of assets matching the search criteria. An empty array is returned if there are no matching assets.</td>
</tr>
<tr>
<td>204 OK</td>
<td>empty</td>
<td>No assets match your search criteria.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>error</td>
<td>The request is not valid. See the response body for additional details.</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>error</td>
<td>You are not authorized to view the requested asset.</td>
</tr>
</tbody>
</table>
<h2 id="search-matched-fields-asset"><code>Search Matched Fields Asset</code></h2>
<p>Searches all assets and returns a list of asset Ids and their matched fields. Use this API to identify the fields in the asset that match your query string.</p>
<h3 id="request-1">Request</h3>
<pre><code class="lang-text">GET api/v1-preview/Tenants/{tenantId}/Namespaces/{namespaceId}/search/Assets?skip={skip}&amp;count={count}&amp;orderby={orderby}&amp;query={queryString}&amp;filter={filterString}&amp;pageSize={pageSize}&amp;maxPages={maxPages}&amp;continuationToken={continuationToken}
</code></pre><h3 id="parameters-1">Parameters</h3>
<p><code>string tenantId</code><br>The tenant identifier</p>
<p><code>string namespaceId</code><br>The namespace identifier</p>
<p><code>string queryString</code><br>The asset query string. Search strings are not case-sensitive.</p>
<p><code>string filterString</code><br>String used to filter the asset search results. Filter strings are not case sensitive. The strings on which you can filter results are limited to the asset AssetTypeName property and the asset metadata properties (using the syntax filter[<em>property_name</em>]=<em>property_value</em>).</p>
<p>[optional] <code>int skip</code><br>An optional parameter representing the zero-based offset of the first asset to retrieve. If not specified, a default value of 0 is used.</p>
<p>[optional] <code>int count</code><br>An optional parameter, between 1 and 1000 (inclusive), representing the maximum number of retrieved assets. If not specified, the default is 100.</p>
<p>[optional] <code>[id|name] [asc|desc|] orderby</code><br>An optional parameter which returns assets ordered either by the asset <code>Id</code> or the asset <code>name</code>. Specify asc or desc to return the results in ascending or descending order. If not specified, the default is ascending order.</p>
<p>[optional] <code>int pageSize</code><br>Must be used with <code>maxPages</code> to configure the pages of the search results. This parameter defines the maximum number of assets that are returned on each page. </p>
<p>[optional] <code>int maxPages</code><br>Must be used with <code>pageSize</code> to configure the pages of the search results. This parameter defines the maximum number of pages. Search results that exceed maxPages are not returned.</p>
<p>[optional] <code>string continuationToken</code><br>Retrieves a specific page of the search results. </p>
<h3 id="response-1">Response</h3>
<p>A list of asset Ids and their matched fields.</p>
<table>
<thead>
<tr>
<th>Status Code</th>
<th>Body Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>Asset list</td>
<td>A list of assets matching the search criteria. An empty array is returned if there are no matching assets.</td>
</tr>
<tr>
<td>204 OK</td>
<td>empty</td>
<td>No assets match your search criteria.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>error</td>
<td>The request is not valid. See the response body for additional details.</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>error</td>
<td>You are not authorized to view the requested asset.</td>
</tr>
</tbody>
</table>
<h4 id="example-response-body">Example response body</h4>
<p>Below is a response when query string is &quot;Name:<em>Tracer</em>&quot;.</p>
<p><code>Count</code> represents the number of matched assets in the given query.</p>
<p>Also returned is a list of <code>Results</code>. Each result contains  </p>
<ul>
<li>The <code>MatchProperties</code> - a list of matched property objects. Each <code>MatchProperties</code> object contains the matched fields and their values.</li>
<li><code>Score</code> - number that indicates the relevancy of the match.</li>
<li><code>Id</code> - Id of the matched asset.</li>
<li><code>TypeId</code> - asset type Id of the asset. This is null if the asset does not reference an asset type.</li>
<li><code>Name</code> - asset name.</li>
<li><code>Description</code> - asset description.</li>
</ul>
<pre><code class="lang-json">HTTP 200 OK 
Content-Type: application/json
{
    &quot;Count&quot;: 2,
    &quot;Results&quot;: [
        {
            &quot;MatchedProperties&quot;: [
                {
                    &quot;Field&quot;: &quot;Name&quot;,
                    &quot;Value&quot;: &quot;Asset Tracer ced7ee16-984d-480f-8338-3055f7f39d8b&quot;
                }
            ],
            &quot;Score&quot;: 1,
            &quot;Id&quot;: &quot;AssetId2b5f41ae-0929-4977-bfbd-1e046d8a66f4&quot;,
            &quot;TypeId&quot;: &quot;AssetTracerType&quot;,
            &quot;Name&quot;: &quot;Asset Tracer ced7ee16-984d-480f-8338-3055f7f39d8b&quot;,
            &quot;Description&quot;: &quot;First tracer device&quot;
        },
        {
            &quot;MatchedProperties&quot;: [
                {
                    &quot;Field&quot;: &quot;Name&quot;,
                    &quot;Value&quot;: &quot;Asset Tracer d6b984dd-b6da-4225-a2e0-59f781d065a4&quot;
                }
            ],
            &quot;Score&quot;: 1,
            &quot;Id&quot;: &quot;AssetId3dbfd185-7c62-49ed-b875-7953cba07fc3&quot;,
            &quot;TypeId&quot;: &quot;AssetTracerType&quot;,
            &quot;Name&quot;: &quot;Asset Tracer d6b984dd-b6da-4225-a2e0-59f781d065a4&quot;,
            &quot;Description&quot;: &quot;Another tracer device&quot;
        }
    ]
}
</code></pre><h3 id="examples-of-asset-query-strings">Examples of asset query strings</h3>
<table>
<thead>
<tr>
<th>Query String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Id:Id1</td>
<td>Returns the asset with <code>Id</code> equal to <strong>Id1</strong>.</td>
</tr>
<tr>
<td>Id:Id1 Name desc</td>
<td>Returns the asset with <code>Id</code> equal to <strong>Id1</strong> return results in descending order by Name.</td>
</tr>
<tr>
<td>Id:Id*</td>
<td>Returns all assets with <code>Id</code> matching <strong>id</strong>* wildcard.</td>
</tr>
<tr>
<td>Name:Name1</td>
<td>Returns all asset with a friendly name equal to <strong>Name1</strong>.</td>
</tr>
<tr>
<td>Id:Id AND Name:Name1</td>
<td>Returns all assets with <code>Id</code> matching the <strong>id</strong> and with a friendly name equal to <strong>Name1</strong>.</td>
</tr>
<tr>
<td>Description:floor1*</td>
<td>Returns all assets with a description that starts with <strong>floor1</strong>.</td>
</tr>
<tr>
<td>Metadata/Name:Building*</td>
<td>Returns all assets with at least one metadata name whose description contains the string <strong>Building</strong>.</td>
</tr>
<tr>
<td>Metadata/Description:heater*</td>
<td>Returns all assets with at least one metadata whose description starts with <strong>heater</strong>.</td>
</tr>
<tr>
<td>Metadata/Value:123</td>
<td>Returns all assets with at least one metadata whose Value property equals <strong>123</strong>.</td>
</tr>
<tr>
<td>Id:X* AND Metadata/Name:B*</td>
<td>Returns all assets with <code>Id</code> starting with <strong>X</strong> and containing at least one metadata value with a name that starts with a <strong>B</strong>.</td>
</tr>
<tr>
<td>AssetTypeId:HeaterTypeId</td>
<td>Returns all assets with <code>AssetTypeId</code> matching <code>HeaterTypeId</code></td>
</tr>
<tr>
<td>AssetTypeName:HeaterTypeName</td>
<td>Returns all assets whose <code>Name</code> field of the asset type matches <strong>HeaterTypeName</strong></td>
</tr>
<tr>
<td>StreamProperties:Pressure</td>
<td>Returns all assets that have one or more stream references with the stream property ID <strong>Pressure</strong>. Note: This search only searches non-key Sds stream properties.</td>
</tr>
<tr>
<td>StreamReferences:Name1</td>
<td>Returns all assets whose stream references contain a stream reference name that matches <strong>Name1</strong>.</td>
</tr>
</tbody>
</table>
<h3 id="special-characters-in-search-queries">Special characters in search queries</h3>
<p>Add the backslash escape character ( \ ) before any special characters in search queries. The following special characters require an escape character:   &quot; |  /  *  \  ( )  : </p>
<p>The following are examples of using the escape character in query strings.</p>
<table>
<thead>
<tr>
<th>Example Field Value</th>
<th>Query String</th>
</tr>
</thead>
<tbody>
<tr>
<td>Austin\Dallas\Fort Worth</td>
<td>Austin\\Dallas\\Fort Worth</td>
</tr>
<tr>
<td>1:100</td>
<td>1\:100</td>
</tr>
</tbody>
</table>
<h3 id="examples-of-asset-filter-strings">Examples of asset filter strings</h3>
<p>Filter strings are not case sensitive. Numeric types must be passed as strings according to English locale. For example, a double of 1.1 must be sent as &quot;1.1&quot;.</p>
<table>
<thead>
<tr>
<th>Query String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>filter[location]=Earth</td>
<td>Returns all assets that contain a metadata name = <strong>location</strong> and value is <strong>Earth</strong>.</td>
</tr>
<tr>
<td>filter[location]=Earth&amp;filter[device]=tracer</td>
<td>Returns all assets that contain a metadata name = <strong>location</strong> and value is <strong>Earth</strong> and also contains a metadata with name = <strong>device</strong> and value is <strong>tracer</strong>.</td>
</tr>
</tbody>
</table>
<h2 id="asset-results-by-pages"><code>Asset Results by Pages</code></h2>
<p>Asset search results can be returned in pages through <code>pageSize</code> ,<code>maxPages</code>, and <code>continuationToken</code> query parameters.</p>
<p>To return search results in pages, first make a call using the <code>pageSize</code> and <code>maxPages</code> parameters. For example:</p>
<p><code>GET search/assets?pageSize=10&amp;maxPages=100</code> returns search results with a maximum of 10 assets per page and a maximum of 100 pages. </p>
<p>The HTTP header of this response of this query will include a &quot;Link&quot; section to which will define either first, next, previous, or last pages. These links can be used directly to follow the pages. For example, the links section may contain:</p>
<pre><code class="lang-json">&lt;https://{clusterName}/api/v1-preview/tenants/{tenantId}/namespaces/{NamespaceId}/Assets?continuationToken={continuationToken}&gt;; rel=&quot;next&quot;, 
&lt;https://{clusterName}/api/v1-preview/tenants/{tenantId}/namespaces/{NamespaceId}/Assets?continuationToken={continuationToken}&gt;; rel=&quot;previous&quot;,
&lt;https://{clusterName}/api/v1-preview/tenants/{tenantId}/namespaces/{NamespaceId}/Assets?continuationToken={continuationToken}&gt;; rel=&quot;first&quot;,
&lt;https://{clusterName}/api/v1-preview/tenants/{tenantId}/namespaces/{NamespaceId}/Assets?continuationToken={continuationToken}&gt;; rel=&quot;last&quot;
</code></pre><p>These links can be followed to get the next, previous, first, and last page.  If no pages are requested, the links to the next, previous, first, and last pages time out in 2 minutes.</p>
<h2 id="asset-faceted-search"><code>Asset Faceted Search</code></h2>
<p>Asset faceted search allows for searching using asset facets. Asset facets are not case sensitive.  Only asset metadata can be used in asset faceted searches.</p>
<h3 id="request-2">Request</h3>
<pre><code class="lang-text">GET api/v1-preview/Tenants/{tenantId}/Namespaces/{namespaceId}/search/Assets/facets?name={category}&amp;count={count}
</code></pre><h3 id="parameters-2">Parameters</h3>
<p><code>string tenantId</code><br>The tenant identifier</p>
<p><code>string namespaceId</code><br>The namespace identifier</p>
<p><code>string category</code><br>The name of the asset metadata for which you want to retrieve the facet values.</p>
<p>[optional] <code>int count</code><br>An optional parameter, between 1 and 1000 (inclusive), representing the maximum number of retrieved assets. If not specified, the default is 100.</p>
<h3 id="response-2">Response</h3>
<p>A list of asset Ids and their matched fields.</p>
<table>
<thead>
<tr>
<th>Status Code</th>
<th>Body Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>Asset facet list</td>
<td>A list of asset facet values that match the search criteria. An empty array is returned if there are no matching asset metadata with the supplied category.</td>
</tr>
<tr>
<td>204 OK</td>
<td>empty</td>
<td>No assets match your search criteria.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>error</td>
<td>The request is not valid. See the response body for additional details.</td>
</tr>
</tbody>
</table>
<h3 id="example">Example</h3>
<p>If you have the following assets in your system:</p>
<table>
<thead>
<tr>
<th>Assets in System</th>
</tr>
</thead>
<tbody>
<tr>
<td>&quot;Id&quot;: &quot;CaliforniaAsset&quot;,    &quot;Metadata&quot;: [      { &quot;Name&quot;: &quot;Manufacturer&quot;, &quot;Value&quot;: &quot;GE&quot;, &quot;SdsTypeCode&quot;: &quot;String&quot; },      { &quot;Name&quot;: &quot;Location&quot;, &quot;Value&quot;: &quot;California&quot;, &quot;SdsTypeCode&quot;: &quot;String&quot; },    ]</td>
</tr>
<tr>
<td>&quot;Id&quot;: &quot;CaliforniaAsset1&quot;,    &quot;Metadata&quot;: [      { &quot;Name&quot;: &quot;Manufacturer&quot;, &quot;Value&quot;: &quot;Rockwell&quot;, &quot;SdsTypeCode&quot;: &quot;String&quot; },      { &quot;Name&quot;: &quot;Location&quot;, &quot;Value&quot;: &quot;California&quot;, &quot;SdsTypeCode&quot;: &quot;String&quot; },    ]</td>
</tr>
<tr>
<td>&quot;Id&quot;: &quot;PhillyAsset&quot;,    &quot;Metadata&quot;: [      { &quot;Name&quot;: &quot;Manufacturer&quot;, &quot;Value&quot;: &quot;GE&quot;, &quot;SdsTypeCode&quot;: &quot;String&quot; },      { &quot;Name&quot;: &quot;Location&quot;, &quot;Value&quot;: &quot;Philly&quot;, &quot;SdsTypeCode&quot;: &quot;String&quot; },    ]</td>
</tr>
</tbody>
</table>
<p>Performing a <code>GET search/assets/facets?Name=Location</code> returns the following response. </p>
<pre><code class="lang-json">HTTP 200 OK 
Content-Type: application/json
[
    {
        &quot;Name&quot;: &quot;Location&quot;,
        &quot;FacetValues&quot;: [
            {
                &quot;Value&quot;: &quot;California&quot;,
                &quot;DocumentCount&quot;: 2
            },
            {
                &quot;Value&quot;: &quot;Philly&quot;,
                &quot;DocumentCount&quot;: 1
            }
        ]
    }
]
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OCS-Docs/blob/master/Content_Portal/Documentation/Assets/asset-search-api.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 1995 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
