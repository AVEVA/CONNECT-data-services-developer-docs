<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Define queries </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Define queries ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html" width="46">
        <img id="logo" src="../../../../Content_Portal/Documentation/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Cloud Services">
        </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="DataViewsQueries">
<h1 id="define-queries">Define queries</h1>

<p>Queries determine what data items are included in a data view.</p>
<h2 id="query">Query</h2>
<p>Each <code>Query</code> must be uniquely identified with an <code>.Id</code>. The identifier should be meaningful. The query&#39;s results will be referenced by this identifier when you include fields in the data view.</p>
<p>The query text is the same as the corresponding data item&#39;s query syntax. For example, queries of kind Stream use <a class="xref" href="../../SequentialDataStore/Searching.html">stream query syntax</a> and queries of kind Asset use <a class="xref" href="../../Assets/asset-search-api.html#examples-of-asset-query-strings">asset query strings</a>.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Optionality</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>Id</td>
<td>string</td>
<td>Required</td>
<td></td>
<td>Unique identifier. Used by <code>FieldSet</code> to link to the query&#39;s results.</td>
</tr>
<tr>
<td>Kind</td>
<td>DataItemResourceType</td>
<td>Optional</td>
<td>Stream</td>
<td>Type of resource to be queried.</td>
</tr>
<tr>
<td>Value</td>
<td>string</td>
<td>Optional</td>
<td>null</td>
<td>A query for OCS resources in the corresponding query syntax.</td>
</tr>
</tbody>
</table>
<h2 id="using-queries">Using queries</h2>
<h3 id="querying-data-items-of-differing-nature">Querying data items of differing nature</h3>
<p>To include data items of completely different nature (like power inverters and weather stations), use one query for each. </p>
<p>For example:</p>
<pre><code class="lang-json">&quot;Queries&quot;: [
  {
    &quot;Id&quot;: &quot;inverter power measurements&quot;,
    &quot;Kind&quot;: &quot;Stream&quot;,
    &quot;Value&quot;: &quot;inverter:* AND measurement:power*&quot;
  },
  {
    &quot;Id&quot;: &quot;weather stations&quot;,
    &quot;Kind&quot;: &quot;Stream&quot;,
    &quot;Value&quot;: &quot;tags:weather&quot;
  }
]
</code></pre><p>Using separate queries means the data items will be available in separate field sets. This is good, because a power inverter has completely different fields versus a weather station.</p>
<h3 id="querying-data-items-of-a-common-nature">Querying data items of a common nature</h3>
<p>In the example scenario, streams that originate from an OSIsoft PI System represent only one fundamental measurement (e.g. Power In), unlike the more general case where the stream may represent several measurements (e.g. Temperature, Solar Radiation, and Cloud Cover). This means that multiple streams refer to the same physical or logical asset. </p>
<p>In the example scenario, each power inverter is associated with two streams. It makes sense to structure our query around the physical asset, returning all &quot;power*&quot; measurements of all inverters:</p>
<pre><code class="lang-json">&quot;Queries&quot;: [
  {
    &quot;Id&quot;: &quot;inverter power measurements&quot;,
    &quot;Kind&quot;: &quot;Stream&quot;,
    &quot;Value&quot;: &quot;inverter:* AND measurement:power*&quot;
  }
]
</code></pre><p>These streams will be available in one single field set. This is good, because our data view can operate in terms of physical assets, and not be bound by how the stream data was recorded.</p>
<h2 id="asset-queries">Asset queries</h2>
<p>Users can create a data view by querying directly for assets, as long as the assets have stream references defined.</p>
<p>An asset query looks identical to a stream query with the exception that query kind (set using the <a class="xref" href="Quick_Start_Define_a_Data_View.html#dataitemresourcetype-enumeration">DataItemResourceType enumeration</a>) is equal to Asset, and query value uses <a class="xref" href="../../Assets/asset-search-api.html">asset search syntax</a>.</p>
<pre><code class="lang-json">&quot;Queries&quot;: [
    {
        &quot;Id&quot;: &quot;inverter power measurements&quot;,
        &quot;Kind&quot;: &quot;Asset&quot;,
        &quot;Value&quot;: &quot;Metadata/Name:Inverter&quot;
    }
]
</code></pre><p>Note that query kind defaults to Stream if not included in the query definition. A single query cannot contain both streams and assets. However, a single data view can contain both stream queries and asset queries.</p>
<pre><code class="lang-json">&quot;Queries&quot;: [
    {
        &quot;Id&quot;: &quot;inverter power measurements&quot;,
        &quot;Kind&quot;: &quot;Asset&quot;,
        &quot;Value&quot;: &quot;Metadata/Name:Inverter&quot;
    },
    {
      &quot;Id&quot;: &quot;weather stations&quot;,
      &quot;Kind&quot;: &quot;Stream&quot;,
      &quot;Value&quot;: &quot;tags:weather&quot;
    }
]
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OCS-Docs/blob/master/Content_Portal/Documentation/DataViews/DefineaDataView/Queries.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 1995 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
