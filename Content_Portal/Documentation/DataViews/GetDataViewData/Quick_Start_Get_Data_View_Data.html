<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Get data view data </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Get data view data ">
    <meta name="generator" content="docfx 2.43.3.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html" width="46">
                <img id="logo" src="../../../../Content_Portal/Documentation/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Cloud Serices"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="DataViewsQuickStartGetData">
<h1 id="get-data-view-data">Get data view data</h1>

<p>You retrieve data view data with the <a class="xref" href="../DataViewsAPIOverview/Data_API.html">Data API</a>. This topic explains the concepts and workflow to retrieve data view data.</p>
<h2 id="general-concepts">General concepts</h2>
<p>The supported mode of retrieval is interpolated values within a user-specified range. Several formats are available, such as JSON and CSV.</p>
<h3 id="index">Index</h3>
<p>All data in a data view is associated with an index value, i.e. a timestamp.
If there are multiple groups in the data view, the index and grouping field values together form a unique identifier for each data record.</p>
<h4 id="index-type">Index type</h4>
<p>The supported index type is <code>DateTime</code>, as noted in <a class="xref" href="../DefineaDataView/Quick_Start_Define_a_Data_View.html">Define a Data View</a>. Date times should use ISO 8601 format and can be in either UTC or local time. Data retrieved using the <a class="xref" href="../DataViewsAPIOverview/Data_API.html">Data API</a> will be returned in UTC.</p>
<p>Interval timespan values should be formatted using the standard timespan format, ie., d.hh:mm:ss.fffffff.</p>
<h4 id="index-range">Index range</h4>
<p>Three parameters control the range and granularity of data returned:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Query-time parameter</th>
<th>Default property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start index</td>
<td><code>startIndex</code></td>
<td><code>DefaultStartIndex</code></td>
<td>The inclusive start boundary of the data view data</td>
</tr>
<tr>
<td>End index</td>
<td><code>endIndex</code></td>
<td><code>DefaultEndIndex</code></td>
<td>The inclusive end boundary of the data view data</td>
</tr>
<tr>
<td>Interval</td>
<td><code>interval</code></td>
<td><code>DefaultInterval</code></td>
<td>The interval between index values</td>
</tr>
</tbody>
</table>
<p>Default values may, optionally, be defined on the data view itself. It is not necessary to define defaults for all three properties. </p>
<p>Index parameters may be specified at query time. These take precedence over any defaults that are set.</p>
<h3 id="retrieval-mode">Retrieval mode</h3>
<p>The supported mode of retrieval is <code>interpolated</code>.</p>
<h4 id="interpolated-retrieval">Interpolated retrieval</h4>
<p>Required index parameters when requesting interpolated data are:</p>
<ul>
<li>Start index</li>
<li>End index</li>
<li>Interval</li>
</ul>
<p>If one or more of these parameters is not specified at query time or as a default, the data query is not valid.</p>
<p>Streams in SDS may be configured to have non-default interpolation and extrapolation behavior. These behaviors are observed when stream data is included in data views. Data view data is always treated as dense, even if SDS returns sparse data. See the following section on empty or missing values for details.</p>
<h4 id="empty-or-missing-values">Empty or missing values</h4>
<p>SDS stream properties may be of nullable (e.g. <code>NullableInt32</code>) or non-nullable (e.g. <code>Int32</code>) types. Data views treats all fields as nullable, as is necessary for its fundamental goal of aligning large datasets.</p>
<table>
<thead>
<tr>
<th>SDS property type</th>
<th>Corresponding data view field type</th>
</tr>
</thead>
<tbody>
<tr>
<td>Double</td>
<td>NullableDouble</td>
</tr>
<tr>
<td>NullableDouble</td>
<td>NullableDouble</td>
</tr>
</tbody>
</table>
<p>If there is no value in an SDS stream for a requested index, the value of the corresponding data view fields(s) will be <code>null</code>.</p>
<h3 id="ordering">Ordering</h3>
<p>Data records are ordered</p>
<ul>
<li>first by group, in the order that the groups resolved</li>
<li>then by index, ascending, within each group</li>
</ul>
<h3 id="format">Format</h3>
<p>The view data is available in several formats.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Id</th>
<th>Enumeration Id</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSON</td>
<td><code>default</code></td>
<td>0</td>
<td>JSON object representation. An array of objects, each describing one data record. (default)</td>
</tr>
<tr>
<td>Table</td>
<td><code>table</code></td>
<td>1</td>
<td>JSON row-column representation. Includes an array describing the <code>.Columns</code> (corresponding to field mappings of the data view) and an array of data <code>.Rows</code>. Each row describes one data record.</td>
</tr>
<tr>
<td>Table with header</td>
<td><code>tableh</code></td>
<td>2</td>
<td>Similar to <code>table</code>. The first of the <code>.Rows</code> is an array of the field mapping identifiers, information that is also available in the <code>.Columns</code> of both table formats.</td>
</tr>
<tr>
<td>CSV</td>
<td><code>csv</code></td>
<td>3</td>
<td>Comma-separated values. Each row describes one data record.</td>
</tr>
<tr>
<td>CSV with header</td>
<td><code>csvh</code></td>
<td>4</td>
<td>Similar to <code>csv</code>. The first row contains the identifier of its corresponding field mapping.</td>
</tr>
</tbody>
</table>
<h3 id="paging">Paging</h3>
<p>Data retrieval operations are paged. Data for a requested index range may span multiple pages.</p>
<p>Optimal page size is dependent both on the client and on the shape of the data view. The size of each individual record is proportional to the &quot;width&quot; of the data view, i.e. how many field mappings are resolved. Clients retrieving data views that resolve into few field mappings may wish to use a page size close to the maximum.</p>
<h4 id="page-size">Page size</h4>
<p>Optimal page size is dependent both on the client and on the shape of the data view. The size of each individual record is proportional to the &quot;width&quot; of the data view, i.e. how many field mappings are resolved. Clients retrieving data views that resolve into few field mappings may wish to use a page size close to the maximum.</p>
<p>By default, data views will be returned with an optimized page size based on the size and layout of the data view. Users can see the calculated page size as a <code>count</code> query parameter in the <code>Link</code> response header (described below). The calculated page size will be included in both the first and the next page links. This default page size can be overridden, however, by providing a <code>count</code> query parameter.</p>
<p>The maximum page size is 250,000.</p>
<h4 id="hyperlinks">Hyperlinks</h4>
<p>When paging through data view data via the REST API, hyperlinks to the first page and next page of data are provided in the <code>Link</code> header. The first page header is signified by relation type of first, <code>rel=&quot;first&quot;</code>. The next page header is signified by <code>rel=&quot;next&quot;</code>. Proper use of the hyperlinks is recommended.</p>
<h5 id="next-page">Next page</h5>
<p>If the requested data spans into another page, the response includes a hyperlink to the next page of data. Absence of a <code>rel=&quot;next&quot;</code> link indicates that the data does not span past the current page.</p>
<p>The hyperlink preserves all request parameters, while adding or updating a <code>continuationToken</code>. For example:</p>
<pre style="word-break:normal; overflow-wrap:break-word;"><code>Link: &lt;.../<wbr>dataViews/<wbr>{dataViewId}/<wbr>data/<wbr>interpolated?continuationToken=MjAxOC0wMS0wMVQwMDowMDoxMVo_MD90Yk1OblE_QUxXcEZBP1VEdGxIMWJROG9z&amp;count=1000&gt;; rel=&quot;next&quot;
</code></pre><p>To retrieve the entire requested range of data, clients should continue to follow next page hyperlinks until the response does not include a next page link. This indicates that the last page has been reached.</p>
<p>It is possible for the continuation token to become invalid during paging. This is unlikely in ordinary circumstances. However, if an independent operation triggers the data view to re-resolve differently, existing continuation tokens are no longer valid. Data requests with an invalid token are considered bad requests. Paging must be restarted from the first page.</p>
<h5 id="first-page">First page</h5>
<p>If the continuation token becomes invalid and paging must be restarted, clients may follow the first page hyperlink included in the <code>Link</code> header. The hyperlink preserves all request parameters, adding or updating the cache behavior to <code>Preserve</code>. This ensures that multiple parallel workers cannot endlessly &quot;trip&quot; each other.</p>
<p>For example:</p>
<pre style="word-break:normal; overflow-wrap:break-word;"><code>Link: &lt;.../<wbr>dataViews/<wbr>{dataViewId}/<wbr>data/<wbr>interpolated?cache=Preserve&amp;count=1000&gt;; rel=&quot;first&quot;
</code></pre><h4 id="net-client-library">.NET client library</h4>
<p>Paging is handled automatically when using the .NET client library to retrieve data. Results are returned as an IAsyncEnumerable<string> where each value is one record of data in the requested format. The actual backend page size of the request is configurable using the backingPageSize parameter.<p>
<h4 id="index-parameters">Index parameters</h4>
<p>Index parameters, such as Start Index, must remain constant while paging through a range of data. If a different range of data is desired, restart the paging operation.</p>
<h4 id="parallelization">Parallelization</h4>
<p>To parallelize one large data retrieval operation across multiple workers, assign each worker a portion of the desired index range. Each worker should follow standard recommended paging behavior within its assigned range. The client application must then concatenate the portions in correct order.</p>
<p>It is recommended to suppress <a class="xref" href="../GetResolvedDataView/Resolved_Data_View.html#when-is-a-data-view-resolved">re-resolution</a> of the data view by specifying a cache behavior of &quot;preserve&quot; on each first-page request.</p>
<h3 id="resolution-behavior">Resolution behavior</h3>
<p>By default, requests for a first page of data will cause the data view to re-resolve. See the documentation on <a class="xref" href="../GetResolvedDataView/Resolved_Data_View.html#when-is-a-data-view-resolved">resolved data views</a>. This ensures that the data view accounts for any streams that have been added to or removed from SDS. Re-resolution may be suppressed by explicitly specifying a cache behavior of &quot;preserve&quot;.</p>
<p>Requests for subsequent pages include a <code>continuationToken</code>. This implictly suppresses re-resolution, akin to cache &quot;preserve&quot; behavior.</p>
<h3 id="field-mapping-maximum-count">Field mapping maximum count</h3>
<p>Shape plays an important role in both the performance and usefulness of a data view. In order to retain this balance, a maximum threshold of 1,000 field mappings is imposed for each data view. OCS checks the field mapping count prior to constructing the data set and returns a message if the limit has been exceeded.</p>
<p>If your data view exceeds this limit, there are several ways to shape the data view to reduce the number of field mappings generated:</p>
<ul>
<li>Use grouping fields to pivot data for like-groups into their own rows.</li>
<li>Use identifying fields to display useful information in headers, rather than as discrete field mappings.</li>
<li>Deselect unneeded fields to remove them as field mappings.</li>
<li>Toggle to the narrow shape option to pivot data fields into individual rows instead of columns.</li>
</ul>
</string></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OCS-Docs/blob/master/Content_Portal/Documentation/DataViews/GetDataViewData/Quick_Start_Get_Data_View_Data.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2020 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
