<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Define a data view </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Define a data view ">
    <meta name="generator" content="docfx 2.43.3.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html" width="46">
        <img id="logo" src="../../../../Content_Portal/Documentation/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Cloud Services">
        </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="DataViewsQuickStartDefine">
<h1 id="define-a-data-view">Define a data view</h1>

<p>The <code>DataView</code> object is a declarative query and shape for stream data. This section describes the <code>DataView</code> object. See the <a class="xref" href="../DataViewsAPIOverview/Data_View_API.html">Data View API section</a> for the corresponding API routes.  </p>
<p>At times, this section makes reference to ways the view <em>resolves</em> into further resources, such as the collection of data items found by each data item query. See the <a class="xref" href="../GetResolvedDataView/Resolved_Data_View.html">Resolved Data View</a> and <a class="xref" href="../DataViewsAPIOverview/Resolved_Data_View_API.html">Resolved Data View API</a> sections for details.</p>
<h2 id="general-concepts">General concepts</h2>
<p>You define multiple aspects of a data view when you define it, including data items and their organization, grouping, and shaping. </p>
<h3 id="define-a-data-view-identifier">Define a data view identifier</h3>
<p>A data view must have a unique identifier. It may have a friendly name and description. If a friendly name is not specified, the identifier will be used as the data view&#39;s name.</p>
<h3 id="include-data-items">Include data items</h3>
<p>One or more queries determine the set of data items (such as SDS streams) that the data view will include. Each <a class="xref" href="Queries.html">Query</a> should represent a collection of like streams. To include streams that represent very different items, such as power inverters and weather stations, use separate queries.</p>
<h3 id="include-data-fields">Include data fields</h3>
<p>Information from, or about, those data items must be included explicitly in the data view as Fields within <a class="xref" href="Field_Sets.html">DataFields</a> or <a class="xref" href="Grouping.html">GroupingFields</a>. By default, a data view includes no fields, except the default <a href="#include-the-index-field">IndexField</a>.</p>
<p>The fields that are available for use are exposed as a &quot;resolved&quot; resource, <a class="xref" href="Available_Field_Sets.html">Available Field Sets</a>. It is recommended to use or adapt those fields instead of defining new fields. Individual fields are organized into <a class="xref" href="Field_Sets.html">DataFieldSets</a> and <a class="xref" href="Grouping.html">GroupingFields</a>.</p>
<h3 id="group-the-data-items">Group the data items</h3>
<p>Data items may be <a class="xref" href="Grouping.html">grouped</a>, which amounts to grouping or partitioning them by one or more field values. To group data items in a data view, define one or more fields as <code>.GroupingFields</code> of the data view. This is one way of producing a meaningful, consumable shape of data.</p>
<h3 id="organize-the-data-fields">Organize the data fields</h3>
<p>Field sets and fields resolve in the order they are defined. They may be re-ordered.</p>
<p>Within each group, a field set may be associated with multiple data items. It is often necessary to disambiguate these items. If a group contains multiple data items from the same query, you may wish to identify those data items so that they are not ambiguous and so they will be aligned across groups. Items can be disambiguated by specifying an <a class="xref" href="Field_Sets.html#identifying-field"><code>.IdentifyingField</code></a>. An identifying field is a field that differentiates the data items within a group, such as the value of <em>Measurement</em> metadata (i.e., the data items are identified by what they measure). Identifying data items also allows the data views engine to &quot;align&quot; them across groups, since it is clear, for example, that streams measuring <em>Power Out</em> and streams measuring <em>Power In</em> are alike. Ensure that each data field&#39;s label includes the {IdentifyingValue} token so the field labels are unique. The default field labels already include it.</p>
<h3 id="include-the-index-field">Include the index field</h3>
<p>The field used for indexing.  If not specified, a default value with a label of &quot;Timestamp&quot; is applied. If specified, a label is required. Field source and keys are not applicable for index field.</p>
<h3 id="define-index-type-and-default-range">Define index type and default range</h3>
<p>Data views currently operate on timestamped data, which is data indexed by a DateTime property. This is reflected by the <code>.IndexTypeCode</code> of the DataView, whose value must be &quot;DateTime&quot;. Default values may be defined for the start index, end index, and/or interval used when data view data is queried.</p>
<h3 id="define-data-view-shape">Define data view shape</h3>
<p>Data views may be set to resolve as standard shape or narrow shape. Standard shape resolves fields similar to how they are defined. Narrow shape pivots the fields vertically, resulting in a view whose schema is independent of what data items (streams) are resolved by the data view. Narrow shape may be used when an invariant output schema is required.</p>
<h2 id="data-view-properties">Data view properties</h2>
<p>The following table lists the properties of a <code>DataView</code>:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Optionality</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>Id</td>
<td>string</td>
<td>Required</td>
<td></td>
<td>Unique indentifier</td>
</tr>
<tr>
<td>Name</td>
<td>string</td>
<td>Optional</td>
<td>value of Id</td>
<td>Friendly name</td>
</tr>
<tr>
<td>Description</td>
<td>string</td>
<td>Optional</td>
<td>null</td>
<td>Longer description of the view</td>
</tr>
<tr>
<td>IndexField</td>
<td>Field</td>
<td>Optional</td>
<td>{ Label:&quot;Timestamp&quot; }</td>
<td>The field used for indexing.  If unspecified a field labeled &quot;Timestamp&quot; is included.</td>
</tr>
<tr>
<td>Queries</td>
<td>Query[]</td>
<td>Optional</td>
<td>[ ]</td>
<td>Queries for SDS Streams to include in the view. This is the starting point when defining a data view. Each Query should represent a collection of like streams. To include streams that represent very different items (e.g. solar inverters and weather), use separate queries.</td>
</tr>
<tr>
<td>DataFieldSets</td>
<td>FieldSet[]</td>
<td>Optional</td>
<td>[ ]</td>
<td>The sets of fields included in the data view. Often copied or adapted from the view&#39;s available field sets, which are exposed in a resolved resource.</td>
</tr>
<tr>
<td>GroupingFields</td>
<td>Field[]</td>
<td>Optional</td>
<td>[ ]</td>
<td>Fields by which the data items are partitioned/grouped.</td>
</tr>
<tr>
<td>DefaultStartIndex</td>
<td>string</td>
<td>Optional</td>
<td>null</td>
<td>The default value of StartIndex used when querying the data view data if none is specified.</td>
</tr>
<tr>
<td>DefaultEndIndex</td>
<td>string</td>
<td>Optional</td>
<td>null</td>
<td>The default value of EndIndex used when querying the data view data if none is specified.</td>
</tr>
<tr>
<td>DefaultInterval</td>
<td>string</td>
<td>Optional</td>
<td>null</td>
<td>The default value of Interval used when querying the data view data if none is specified.</td>
</tr>
<tr>
<td>IndexTypeCode</td>
<td>SdsTypeCode</td>
<td>Optional</td>
<td>DateTime</td>
<td>The name of the index data type. DateTime is the currently supported index type.</td>
</tr>
<tr>
<td>Shape</td>
<td>DataViewShape</td>
<td>Optional</td>
<td>Standard</td>
<td>Data views may be set to resolve as standard shape or narrow shape. Narrow shape may be used when an invariant output schema is required.</td>
</tr>
</tbody>
</table>
<h3 id="rules-for-id-property">Rules for Id property</h3>
<ul>
<li>Is not case sensitive, but case is preserved</li>
<li>Can contain spaces</li>
<li>Cannot contain forward slash (&quot;/&quot;)</li>
<li>Can contain a maximum of 100 characters</li>
</ul>
<h2 id="related-object-types">Related object types</h2>
<p>The following sections describe the classes and enumerations used when defining data views.</p>
<h3 id="query">Query</h3>
<p>A query for SDS Streams to include in the view.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Optionality</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>Id</td>
<td>string</td>
<td>Required</td>
<td></td>
<td>Unique identifier. Used by FieldSet to link to the query&#39;s results.</td>
</tr>
<tr>
<td>Value</td>
<td>string</td>
<td>Optional</td>
<td>null</td>
<td>A query for streams in SDS query syntax. A null or empty query will not match any streams.</td>
</tr>
</tbody>
</table>
<h3 id="fieldset">FieldSet</h3>
<p>A set of fields included in the data view, sharing a common role or source (<code>.SourceType</code>). One <code>DataView</code> is likely to include one <code>FieldSet</code> per query.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Optionality</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>QueryId</td>
<td>string</td>
<td>Required</td>
<td></td>
<td>Must correspond to a query defined in the data view.</td>
</tr>
<tr>
<td>DataFields</td>
<td>Field[]</td>
<td>Optional</td>
<td>[ ]</td>
<td>Data fields to include in the data view. Often copied or adapted from the view&#39;s available field sets, which are exposed in a resolved resource.</td>
</tr>
<tr>
<td>IdentifyingField</td>
<td>Field</td>
<td>Optional</td>
<td>null</td>
<td>A field by which to tell the data items apart, within each group. Any field from field sources <code>FieldSource.Id</code>, <code>FieldSource.Name</code>, <code>FieldSource.Metadata</code> and <code>FieldSource.Tags</code> can be used as an identifying field.</td>
</tr>
</tbody>
</table>
<h3 id="field">Field</h3>
<p>Individual piece of information, such as a property of an SDS stream or metadata of that stream.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Optionality</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>Source</td>
<td>FieldSource</td>
<td>Optional</td>
<td>NotApplicable</td>
<td>Identifies the <code>.Source</code> of the field&#39;s values (not applicable for an index field). See the FieldSource enumeration section in this topic for details.</td>
</tr>
</tbody>
</table>
<p>All sources except <code>FieldSource.NotApplicable</code> can be used as data fields. Fields from sources <code>FieldSource.Id</code>, <code>FieldSource.Name</code>, <code>FieldSource.Metadata</code> and <code>FieldSource.Tags</code> can be used as grouping fields and identifying fields. Some sources are used in conjunction with the Keys property (see below).
| Keys | String[] | Optional | [ ] | Used for sources <code>FieldSource.PropertyId</code>, <code>FieldSource.PropertyName</code>, <code>FieldSource.Metadata</code> and <code>FieldSource.Tags</code>, e.g. to map to specific stream properties by id. If more than one key is specified, they are matched as exclusive-or. A key has to be a non-null value.
| Label | string | Optional | null | Friendly name for the field. Certain tokens have special meaning: one of these, {IdentifyingValue}, is included in the suggested labels of AvailableFieldSets. Tokens that do not resolve are &quot;&quot; (empty string). The label is required in a field for all usages except in an identifying field. Label is trimmed of whitespace when used to identify field mappings. </p>
<h3 id="fieldsource-enumeration">FieldSource enumeration</h3>
<p>For fields that derive data from a data item (e.g. an SDS stream), the <code>FieldSource</code> enumeration specifies the part of that data item that a Field resolves to. Some sources require one or more <code>.Keys</code> to be specified on the field, such as <code>PropertyId</code>, in which a key is the id of a desired property.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Enumeration Id</th>
<th>Keyed</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td>NotApplicable</td>
<td>0</td>
<td>No</td>
<td>FieldSource is not applicable for an index field</td>
</tr>
<tr>
<td>Id</td>
<td>1</td>
<td>No</td>
<td>The id of the data item (stream)</td>
</tr>
<tr>
<td>Name</td>
<td>2</td>
<td>No</td>
<td>The name of the data item (stream)</td>
</tr>
<tr>
<td>PropertyId</td>
<td>3</td>
<td>Yes</td>
<td>Data from a stream property, found by id</td>
</tr>
<tr>
<td>PropertyName</td>
<td>4</td>
<td>Yes</td>
<td>Data from a stream property, found by name</td>
</tr>
<tr>
<td>Metadata</td>
<td>5</td>
<td>Yes</td>
<td>Value of the data item metadata, found by key</td>
</tr>
<tr>
<td>Tags</td>
<td>6</td>
<td>Yes</td>
<td>Data item tags matching the collection provided</td>
</tr>
</tbody>
</table>
<h3 id="sdstypecode-enumeration">SdsTypeCode enumeration</h3>
<p><code>SdsTypeCode</code> enumeration is the name of a data type. It is used when defining a data view, where the only supported <code>.IndexTypeCode</code> is &quot;DateTime&quot;.</p>
<p>See <a class="xref" href="../../SequentialDataStore/SDS_Types.html#sdstypecode">Sds documentation</a> for details.</p>
<h3 id="dataviewshape-enumeration">DataViewShape enumeration</h3>
<p><code>DataViewShape</code> enumeration describes possible output shapes for a data view.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Enumeration Id</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Standard</td>
<td>0</td>
<td>Fields are resolved into a shape similar to how they were defined. This is the recommended shape unless specific needs dictate.</td>
</tr>
<tr>
<td>Narrow</td>
<td>1</td>
<td>Fields are pivoted vertically, resulting in a view whose schema is independent of what data items (streams) are resolved by the data view.</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OCS-Docs/blob/master/Content_Portal/Documentation/DataViews/DefineaDataView/Quick_Start_Define_a_Data_View.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 1995 - 2020 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
